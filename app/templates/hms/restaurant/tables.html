{% extends "hms/layout/base.html" %}
{% block title %}Tables{% endblock %}
{% block content %}
<div class="container-xl">
  <div class="page-header d-flex justify-content-between align-items-center">
    <h2 class="page-title">Restaurant Tables</h2>
    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addTableModal">Add Table</button>
  </div>
  <div class="card">
    <div class="card-body">
      {% if tables %}
      <table class="table table-vcenter">
        <thead><tr><th>Table</th><th>Capacity</th><th>Section</th><th>Status</th></tr></thead>
        <tbody>
          {% for table in tables %}
          <tr>
            <td><strong>{{ table.table_number }}</strong></td>
            <td>{{ table.capacity }} seats</td>
            <td>{{ table.section or 'Main' }}</td>
            <td><span class="badge bg-{{ 'success' if table.status == 'available' else 'danger' if table.status == 'occupied' else 'warning' }}">{{ table.status|title }}</span></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}<p class="text-muted text-center py-4">No tables yet</p>{% endif %}
    </div>
  </div>
</div>

<!-- Add Table Modal -->
<div class="modal modal-blur fade" id="addTableModal" tabindex="-1">
  <div class="modal-dialog modal-sm">
    <form method="post" action="{{ url_for('hms.table_add') }}" class="modal-content">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
      <div class="modal-header"><h5 class="modal-title">Add Table</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
      <div class="modal-body">
        <div class="mb-3"><label class="form-label">Table Number</label><input type="text" name="table_number" class="form-control" required></div>
        <div class="mb-3"><label class="form-label">Capacity</label><input type="number" name="capacity" class="form-control" value="4" min="1"></div>
        <div class="mb-3"><label class="form-label">Section</label><input type="text" name="section" class="form-control" value="Main"></div>
      </div>
      <div class="modal-footer"><button type="submit" class="btn btn-primary">Add Table</button><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button></div>
    </form>
  </div>
</div>
{% endblock %}
