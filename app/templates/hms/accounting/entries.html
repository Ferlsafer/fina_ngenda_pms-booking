{% extends "hms/layout/base.html" %}
{% block title %}Journal Entries{% endblock %}
{% block content %}
<div class="container-xl">
  <div class="page-header">
    <h2 class="page-title">Journal Entries</h2>
    <a href="{{ url_for('hms.accounting_entry_create') }}" class="btn btn-primary">New Entry</a>
  </div>
  <div class="card">
    <div class="card-body">
      {% if entries %}
      <table class="table table-vcenter">
        <thead><tr><th>Date</th><th>Reference</th><th>Lines</th><th class="text-end">Total</th></tr></thead>
        <tbody>
          {% for entry in entries %}
          <tr>
            <td>{{ entry.date.strftime('%Y-%m-%d') }}</td>
            <td>{{ entry.reference or '-' }}</td>
            <td>{{ entry.lines.count() }} lines</td>
            <td class="text-end">TSh {{ entry.lines|sum(attribute='debit')|format_number }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p class="text-muted text-center py-4">No entries found</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
